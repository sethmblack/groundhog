(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9038:function(e,t,s){Promise.resolve().then(s.bind(s,1579))},5184:function(e,t,s){"use strict";var a=s(2279);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},1579:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(6287),r=s(9334),n=s(9908),d=s(5184),i=s(5961);function c(){let e=(0,d.useRouter)(),{user:t,loading:s,signOut:c}=(0,i.a)(),[l,x]=(0,r.useState)([]),[u,o]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!s&&!t){e.push("/auth/signin");return}x([{guid:"dash-1",name:"Production Overview",accountId:"12345",lastBackup:"2024-01-15"},{guid:"dash-2",name:"User Metrics",accountId:"12345",lastBackup:"2024-01-15"},{guid:"dash-3",name:"API Performance",accountId:"12346",lastBackup:"2024-01-14"}]),o([{snapshotId:"snap-1",dashboardGuid:"dash-1",dashboardName:"Production Overview",createdAt:"2024-01-15T10:00:00Z",status:"COMPLETED"},{snapshotId:"snap-2",dashboardGuid:"dash-2",dashboardName:"User Metrics",createdAt:"2024-01-15T09:30:00Z",status:"COMPLETED"}]),m(!1)},[s,t,e]);let p=async()=>{await c(),e.push("/auth/signin")};return h?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("nav",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(n.default,{href:"/",className:"text-xl font-bold text-gray-900",children:"Groundhog"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.default,{href:"/dashboard/apikeys",className:"text-gray-600 hover:text-gray-900",children:"API Keys"}),(0,a.jsx)(n.default,{href:"/dashboard/backups",className:"text-gray-600 hover:text-gray-900",children:"Backups"}),(0,a.jsx)(n.default,{href:"/dashboard/settings",className:"text-gray-600 hover:text-gray-900",children:"Settings"}),(0,a.jsx)("button",{onClick:p,className:"text-gray-600 hover:text-gray-900",children:"Sign Out"})]})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total Dashboards"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:l.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total Backups"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:u.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"API Keys"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:"2"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Storage Used"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:"45 MB"})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Your Dashboards"}),(0,a.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Backup All"})]}),(0,a.jsx)("div",{className:"border-t border-gray-200",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Account"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Backup"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.accountId}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastBackup||"Never"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900 mr-4",children:"Backup"}),(0,a.jsx)("button",{className:"text-green-600 hover:text-green-900",children:"History"})]})]},e.guid))})]})})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Backups"})}),(0,a.jsx)("div",{className:"border-t border-gray-200",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dashboard"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.dashboardName}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:e.status})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900 mr-4",children:"View"}),(0,a.jsx)("button",{className:"text-green-600 hover:text-green-900",children:"Restore"})]})]},e.snapshotId))})]})})]})]})})]})}},5961:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return h}});var a=s(6287),r=s(9334),n=s(9029),d=s(2365),i=s(221),c=s(9695),l=s(194),x=s(4085);let u=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)(null),[h,m]=(0,r.useState)(!0);async function p(){try{var e;let t=await (0,n.t)();o({userId:t.userId,email:(null===(e=t.signInDetails)||void 0===e?void 0:e.loginId)||""})}catch(e){o(null)}finally{m(!1)}}async function g(e,t){(await (0,d.z)({username:e,password:t})).isSignedIn&&await p()}async function y(e,t,s){await (0,i.y)({username:e,password:t,options:{userAttributes:{email:e,"custom:orgIds":s}}})}async function f(e,t){await (0,c._)({username:e,confirmationCode:t})}async function j(){await (0,l.w)(),o(null)}async function N(){try{var e,t;let s=await (0,x.y)();return(null===(t=s.tokens)||void 0===t?void 0:null===(e=t.accessToken)||void 0===e?void 0:e.toString())||null}catch(e){return null}}return(0,r.useEffect)(()=>{p()},[]),(0,a.jsx)(u.Provider,{value:{user:s,loading:h,signIn:g,signUp:y,confirmSignUp:f,signOut:j,getAccessToken:N},children:t})}function h(){let e=(0,r.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[572,908,975,731,744],function(){return e(e.s=9038)}),_N_E=e.O()}]);