(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{8913:function(e,t,n){Promise.resolve().then(n.bind(n,4018))},5184:function(e,t,n){"use strict";var r=n(2279);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},4018:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(6287),s=n(9334),a=n(5184),i=n(9908),u=n(5961);function l(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{confirmSignUp:n}=(0,u.a)(),l=t.get("email")||"",[c,o]=(0,s.useState)(""),[d,f]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),x=async t=>{t.preventDefault(),f(""),h(!0);try{await n(l,c),e.push("/auth/signin?verified=true")}catch(e){f(e instanceof Error?e.message:"Failed to verify code. Please try again.")}finally{h(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Groundhog"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Verify your email"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["We sent a verification code to ",(0,r.jsx)("strong",{children:l}),". Enter the code below to verify your account."]}),d&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-50 text-red-600 rounded-lg",children:d}),(0,r.jsxs)("form",{onSubmit:x,children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),(0,r.jsx)("input",{type:"text",id:"code",value:c,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center text-2xl tracking-widest",required:!0,maxLength:6,placeholder:"000000"})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Verifying...":"Verify Email"})]}),(0,r.jsx)("div",{className:"mt-4 text-center text-sm text-gray-600",children:(0,r.jsx)(i.default,{href:"/auth/signin",className:"text-blue-600 hover:underline",children:"Back to sign in"})})]})})}function c(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,r.jsx)(l,{})})}},5961:function(e,t,n){"use strict";n.d(t,{H:function(){return f},a:function(){return m}});var r=n(6287),s=n(9334),a=n(9029),i=n(2365),u=n(221),l=n(9695),c=n(194),o=n(4085);let d=(0,s.createContext)(void 0);function f(e){let{children:t}=e,[n,f]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0);async function x(){try{var e;let t=await (0,a.t)();f({userId:t.userId,email:(null===(e=t.signInDetails)||void 0===e?void 0:e.loginId)||""})}catch(e){f(null)}finally{h(!1)}}async function g(e,t){(await (0,i.z)({username:e,password:t})).isSignedIn&&await x()}async function b(e,t,n){await (0,u.y)({username:e,password:t,options:{userAttributes:{email:e,"custom:orgIds":n}}})}async function y(e,t){await (0,l._)({username:e,confirmationCode:t})}async function v(){await (0,c.w)(),f(null)}async function w(){try{var e,t;let n=await (0,o.y)();return(null===(t=n.tokens)||void 0===t?void 0:null===(e=t.accessToken)||void 0===e?void 0:e.toString())||null}catch(e){return null}}return(0,s.useEffect)(()=>{x()},[]),(0,r.jsx)(d.Provider,{value:{user:n,loading:m,signIn:g,signUp:b,confirmSignUp:y,signOut:v,getAccessToken:w},children:t})}function m(){let e=(0,s.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[572,908,975,731,744],function(){return e(e.s=8913)}),_N_E=e.O()}]);